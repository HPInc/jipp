{%- if not noheader -%}
// Copyright 2018 HP Development Company, L.P.
// SPDX-License-Identifier: MIT
//
// DO NOT MODIFY. Code is auto-generated by {{ app }}. Content taken from registry at
// https://www.iana.org/assignments/ipp-registrations/ipp-registrations.xml, updated on {{ updated }}
@file:Suppress("MaxLineLength", "WildcardImport")

package com.hp.jipp.model

import com.hp.jipp.encoding.* // ktlint-disable no-wildcard-imports

{%- endif %}

/**
 * Data object corresponding to a "{{ collection.name }}" collection{%- if collection.specs %} as defined in:{%- for spec in collection.specs | sort %}
 * [{{ spec | upper }}]({{ specs[spec] }}){{ "," if not loop.last }}{%- endfor %}{%- else %}{%- endif %}.{%- if collection['refs']%}
 *
 * Also used by:{%- for ref in collection['refs'] | sort %}
 *   * `{{ ref }}`{%- endfor%}{%- endif %}
 */
@Suppress("RedundantCompanionReference", "unused")
data class {{ collection.name | camel_class }}
constructor(
{%- for name, member in collection.members | dictsort %}
{%- if member.kdoc %}
    /** {{ member.kdoc }} */
{%- endif %}
    var {{ name | camel_member }}: {%- if member.set %} List<{{ member.ktype }}>{% else %} {{ member.ktype }}{% endif %}? = null{{ "," if not loop.last }}
{%- endfor %}
) : AttributeCollection {

    /** Construct an empty [{{ collection.name | camel_class }}]. */
    constructor() : this({%- for item in collection.members %}null{{ ", " if not loop.last }}{%- endfor %})

    /** Produce an attribute list from members. */
    override val attributes: List<Attribute<*>> by lazy {
        listOfNotNull(
{%- for name, member in collection.members | dictsort %}
            {{ name | camel_member }}?.let { Types.{{ name | camel_member }}.{%- if member.ksetof and member.set %}{{ member.ksetof }}{%- else %}of{%- endif %}(it) }{{"," if not loop.last }}
{%- endfor %}
        )
    }

    /** Type for attributes of this collection */
    class Type(override val name: String) : AttributeCollection.Type<{{ collection.name | camel_class }}>({{ collection.name | camel_class }})

    /** All member names as strings. */
    object Name {
        {%- for name, member in collection.members | dictsort %}
        /** "{{ member.name }}" member name */
        const val {{ member.name | camel_member }} = "{{ member.name }}"
        {%- endfor %}
    }

    /** Types for each member attribute. */
    object Types {
        {%- for name, member in collection.members | dictsort %}
        {%- if member.syntax == 'enum' %}
        /**
         * "{{ member.name }}" member type. {%- if member.kdoc %}
         * {{ member.kdoc }}{%- endif %}
         */
        {%- endif %}
        val {{ member.name | camel_member }} = {{ member.kintro }}Name.{{ member.name | camel_member }})

        {%- endfor %}
    }

    /** Defines types for each member of [{{ collection.name | camel_class }}] */
    companion object : AttributeCollection.Converter<{{ collection.name | camel_class }}> {
        override fun convert(attributes: List<Attribute<*>>): {{ collection.name | camel_class }} =
            {{ collection.name | camel_class }}(
{%- for name, member in collection.members | dictsort %}
 {%- if member.set %}
                extractAll(attributes, Types.{{ name | camel_member }})
  {%- if member.ktype_accessor %}?.map { it.{{ member.ktype_accessor }} }{%- endif %}{{ "," if not loop.last }}
 {%- else %}
                extractOne(attributes, Types.{{ name | camel_member }})
  {%- if member.ktype_accessor %}?.{{ member.ktype_accessor }}{%- endif %}{{ "," if not loop.last }}
 {%- endif %}
{%- endfor %}
            )
    }

{%- for name, member in collection.members | dictsort %}{%- if member.kimpl %}

{{ member.kimpl }}{%- endif %}{%- endfor %}
}

